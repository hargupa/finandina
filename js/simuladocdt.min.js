var app=angular.module("simuladorCDT",[]);app.controller("CdtController",["$scope","$window",function(a,e){a.Math=window.Math,a.data={montoInversion:"",tasaEA:4.7437,tasaEA_texto:"4.74% EA",plazoDias:"",fuente:4,ica:0,modalidad:"V",montoInteresNeto:0,totalInversion:0,errormonto:"",errordias:"",mindias:90,maxdias:540,minMontoInversion:1e6,ShowModal:!1,nombre:"",celular:"",email:""},a.calculos=function(){if(a.data.errormonto="",a.data.errordias="",a.data.montoInteresNeto=0,a.data.totalInversion=0,""==a.data.montoInversion)return a.data.errormonto="Debe ingresar el monto de la inversión",!1;if(""==a.data.plazoDias||null==a.data.plazoDias)return a.data.errordias="Debe ingresar el plazo en días",!1;if(_montoInversion=a.data.montoInversion.replace(/\,/g,""),_montoInversion<a.data.minMontoInversion)return a.data.errormonto="El monto mínimo para la inversión es de $"+a.data.minMontoInversion,!1;if(a.data.plazoDias<a.data.mindias)return a.data.errordias="El mínimo de días es "+a.data.mindias+" días.",!1;if(a.data.plazoDias>a.data.maxdias)return a.data.errordias="El máximo de días es "+a.data.maxdias+" días.",!1;var e;e=a.cdtNormal(_montoInversion),a.data.montoInteresNeto=Math.round(e),a.data.totalInversion=parseInt(_montoInversion)+parseInt(a.data.montoInteresNeto);var r=new Date;r.setDate(r.getDate()+parseInt(a.data.plazoDias));var t=r.getFullYear(),n=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getDate().toString().padStart(2,"0");a.data.fechaFinal=o+"/"+n+"/"+t},a.cdtNormal=function(e){var r=e*(a.data.tasaEA/100)/(360/a.data.plazoDias);return r-(r*(a.data.fuente/100)+r*(a.data.ica/100))},a.cdtDesmaterializado=function(){a.data.tasaEA;var e=Math.round(a.data.tasaEA/360*a.data.plazoDias).toFixed(6),r=Math.round(e*a.data.montoInversion),t=r-(Math.round(r*(a.data.fuente/100))+Math.round(r*(a.data.ica/100)));return a.data.montoInteresNeto=t,t},a.guardarInfo=function(){return a.data.errornombre="",a.data.errorcel="",a.data.erroremail="",""==a.data.nombre?(a.data.errornombre="Debe ingresar su nombre y apellido",!1):""==a.data.celular?(a.data.errorcel="Debe ingresar su numero de celular",!1):""==a.data.email?(a.data.erroremail="Debe ingresar su correo electronico",!1):(console.log("guardar Data"),void(a.data.ShowModal=!0))},a.contactenos=function(){e.location.href="formContacto.html"},a.showindex=function(){e.location.href="index.html"}}]),app.directive("mileskeypress",(function(){return{restrict:"A",require:"ngModel",link:function(a,e,r,t){var n=function(a){if(void 0===a)return"";var e=(a=a.replace(/\,/g,"")).replace(/[^0-9,]/g,"");if(e!==a)t.$setViewValue(e),t.$render();else{if(e>999){for(var r=parseInt(e).toString().split(""),n=0,o=[],i=r.length-1,s=i;s>=0;s--){var d=r[s].replace(/\,/g,"");""!=d&&(i>=3?2==n&&0!=s?(o[s]=","+d,n=0):(o[s]=d,n+=1):o[s]=d)}e=o.join("")}t.$setViewValue(e),t.$render(),t.$setValidity("onlyNumbers",!0)}return e};t.$parsers.unshift(n),t.$parsers.push(n),r.$observe("onlyNumbers",(function(){n(t.$ViewValue)}))}}})).directive("letterkeypress",(function(){return{restrict:"A",require:"ngModel",link:function(a,e,r,t){var n=function(a){if(void 0===a)return"";var e=a.replace(/[^A-Za-z ]/g,"");return e!==a?(t.$setViewValue(e),t.$render()):t.$setValidity("onlyLetters",!0),e};t.$parsers.unshift(n),t.$parsers.push(n),r.$observe("onlyLetters",(function(){n(t.$ViewValue)}))}}})).directive("numberkeypress",(function(){return{restrict:"A",require:"ngModel",link:function(a,e,r,t){var n=function(a){if(void 0===a)return"";var e=a.replace(/[^0-9]/g,"");return e!==a?(t.$setViewValue(e),t.$render()):t.$setValidity("onlyNumbers",!0),e};t.$parsers.unshift(n),t.$parsers.push(n),r.$observe("onlyLetters",(function(){n(t.$ViewValue)}))}}}));