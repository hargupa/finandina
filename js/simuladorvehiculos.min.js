var app=angular.module("SimuladorVehiculos",[]);app.controller("SimuladorController",["$scope","$window",function(o,a){o.Math=window.Math,o.data={montoFinanciar:0,precioVehiculo:"",cuotaInicial:"",tasa:1.22,plazo:"",anioModelo:"",minMonto:3e6,errorPrecio:"",errorCuota:"",errorMonto:"",ShowMonto72Meses:!0,ShowMonto72MesesCuota:!1,ShowMonto60Meses:!0,ShowMonto60MesesCuota:!1,ShowMonto48Meses:!0,ShowMonto48MesesCuota:!1,ShowMonto36Meses:!0,ShowMonto36MesesCuota:!1,ShowMonto24Meses:!0,ShowMonto24MesesCuota:!1,ShowMonto12Meses:!0,ShowMonto12MesesCuota:!1,ShowImgCarro:!0,ShowImgMoto:!1,ShowTextoPorcentaje:!1,ShowForm:!0,ShowTerminos:!1,ShowTextoUsado:!1,ShowTextoNuevo:!0,ShowErrorValor:!1,ShowModeloCarroMoto:!0,ShowModeloCarroUsado:!1,nombre:"",celular:"",email:""},o.MostrarCuota=function(a){switch(o.data.ShowMonto72Meses=!0,o.data.ShowMonto72MesesCuota=!1,o.data.ShowMonto60Meses=!0,o.data.ShowMonto60MesesCuota=!1,o.data.ShowMonto48Meses=!0,o.data.ShowMonto48MesesCuota=!1,o.data.ShowMonto36Meses=!0,o.data.ShowMonto36MesesCuota=!1,o.data.ShowMonto24Meses=!0,o.data.ShowMonto24MesesCuota=!1,o.data.ShowMonto12Meses=!0,o.data.ShowMonto12MesesCuota=!1,a){case 1:o.data.ShowMonto72Meses=!1,o.data.ShowMonto72MesesCuota=!0,o.data.plazo=72;break;case 2:o.data.ShowMonto60Meses=!1,o.data.ShowMonto60MesesCuota=!0,o.data.plazo=60;break;case 3:o.data.ShowMonto48Meses=!1,o.data.ShowMonto48MesesCuota=!0,o.data.plazo=48;break;case 4:o.data.ShowMonto36Meses=!1,o.data.ShowMonto36MesesCuota=!0,o.data.plazo=36;break;case 5:o.data.ShowMonto24Meses=!1,o.data.ShowMonto24MesesCuota=!0,o.data.plazo=24;break;case 6:o.data.ShowMonto12Meses=!1,o.data.ShowMonto12MesesCuota=!0,o.data.plazo=12}o.data.cuotaMensual=o.calculoCuotaMensual(o.data.tasa,o.data.plazo,o.data.montoFinanciar),0==o.data.ShowImgCarro&&(o.data.ShowMonto72Meses=!1,o.data.ShowMonto72MesesCuota=!1)},o.CambiarVehiculo=function(){1==o.data.ShowImgCarro?(o.data.ShowImgCarro=!1,o.data.ShowImgMoto=!0,o.data.ShowMonto72Meses=!1,o.data.ShowMonto72MesesCuota=!1,o.data.ShowModeloCarroMoto=!0,o.data.ShowModeloCarroUsado=!1):(o.data.ShowImgCarro=!0,o.data.ShowImgMoto=!1,o.data.ShowMonto72Meses=!0,o.data.ShowMonto72MesesCuota=!1)},o.CambiarEstadoVehiculo=function(){1==o.data.ShowTextoNuevo?(o.data.ShowTextoUsado=!0,o.data.ShowTextoNuevo=!1,o.data.ShowModeloCarroMoto=!1,o.data.ShowModeloCarroUsado=!0):(o.data.ShowTextoUsado=!1,o.data.ShowTextoNuevo=!0,o.data.ShowModeloCarroMoto=!0,o.data.ShowModeloCarroUsado=!1)},o.mostrarTerminos=function(){o.data.ShowForm=!1,o.data.ShowTerminos=!0},o.ocultarTerminos=function(){o.data.ShowForm=!0,o.data.ShowTerminos=!1},o.calcularDatos=function(){if(o.data.errorPrecio="",o.data.errorCuota="",o.data.errorMonto="",""==o.data.precioVehiculo)return o.data.errorPrecio="ingrese precio del vehiculo",!1;if(""==o.data.cuotaInicial)return o.data.errorCuota="ingrese cuota Inicial del vehiculo",!1;_precioVehiculo=o.data.precioVehiculo.replace(/\,/g,""),_cuotaInicial=parseInt(o.data.cuotaInicial.replace(/\,/g,""));var a=(new Date).getFullYear()-o.data.anioModelo;o.data.ShowImgCarro&&a>14&&(o.data.errorModelo="modelo de vehiculo");var e=20*_precioVehiculo/100;if(_cuotaInicial!=e&&(o.data.errorCuota="Debe ser del 20% del precio del vehiculo"),_montoFinanciar=_precioVehiculo-_cuotaInicial,o.data.montoFinanciar=_montoFinanciar>=0?_montoFinanciar:0,o.data.montoFinanciar<o.data.minMonto)return o.data.errorMonto="El monto mï¿½nimo a financiar debe ser mayor que $"+o.data.minMonto,!1;""!=o.data.plazo&&(o.data.cuotaMensual=o.calculoCuotaMensual(o.data.tasa,o.data.plazo,o.data.montoFinanciar))},o.calculoCuotaMensual=function(o,a,e){var t=(1+(o/=100))**a,r=o*t*e/(t-1);return Math.round(r)},o.contactenos=function(){a.location.href="formContacto.html"},o.guardarInfo=function(){console.log("guardar Data")}}]),app.directive("mileskeypress",(function(){return{restrict:"A",require:"ngModel",link:function(o,a,e,t){var r=function(o){if(void 0===o)return"";var a=(o=o.replace(/\,/g,"")).replace(/[^0-9,]/g,"");if(a!==o)t.$setViewValue(a),t.$render();else{if(a>999){for(var e=parseInt(a).toString().split(""),r=0,n=[],s=e.length-1,i=s;i>=0;i--){var d=e[i].replace(/\,/g,"");""!=d&&(s>=3?2==r&&0!=i?(n[i]=","+d,r=0):(n[i]=d,r+=1):n[i]=d)}a=n.join("")}t.$setViewValue(a),t.$render(),t.$setValidity("onlyNumbers",!0)}return a};t.$parsers.unshift(r),t.$parsers.push(r),e.$observe("onlyNumbers",(function(){r(t.$ViewValue)}))}}})).directive("letterkeypress",(function(){return{restrict:"A",require:"ngModel",link:function(o,a,e,t){var r=function(o){if(void 0===o)return"";var a=o.replace(/[^A-Za-z ]/g,"");return a!==o?(t.$setViewValue(a),t.$render()):t.$setValidity("onlyLetters",!0),a};t.$parsers.unshift(r),t.$parsers.push(r),e.$observe("onlyLetters",(function(){r(t.$ViewValue)}))}}})).directive("numberkeypress",(function(){return{restrict:"A",require:"ngModel",link:function(o,a,e,t){var r=function(o){if(void 0===o)return"";var a=o.replace(/[^0-9]/g,"");return a!==o?(t.$setViewValue(a),t.$render()):t.$setValidity("onlyNumbers",!0),a};t.$parsers.unshift(r),t.$parsers.push(r),e.$observe("onlyLetters",(function(){r(t.$ViewValue)}))}}}));